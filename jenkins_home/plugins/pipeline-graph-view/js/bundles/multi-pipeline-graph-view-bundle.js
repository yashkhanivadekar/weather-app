(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode('.app-page-body--one-column{max-width:95vw}.PWGx-pipeline-connector{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background))}.PWGx-pipeline-node{position:relative;display:flex;align-items:center;justify-content:center;width:1.75rem;height:1.75rem;z-index:0}.PWGx-pipeline-node:before{content:"";position:absolute;top:-3px;right:-3px;bottom:-3px;left:-3px;background:var(--card-background);border-radius:50%;z-index:-1}.PWGx-pipeline-node--selected:after{box-shadow:0 0 0 .125rem currentColor,0 0 0 .5rem var(--card-background)!important}.PWGx-pipeline-node--running.PWGx-pipeline-node--selected:after{top:0;right:0;bottom:0;left:0;box-shadow:0 0 0 .125rem color-mix(in srgb,currentColor,transparent),0 0 0 .5rem var(--card-background)!important}.PWGx-pipeline-node:has(a):after{content:"";position:absolute;top:1px;right:1px;bottom:1px;left:1px;border-radius:50%;z-index:-1;transition:var(--standard-transition);box-shadow:0 0 0 .5rem transparent}.PWGx-pipeline-node:has(a):focus-visible{outline:none}.PWGx-pipeline-node:has(a):hover:after{background:oklch(from var(--color) l c h/.1)}.PWGx-pipeline-node:has(a):active:after,.PWGx-pipeline-node:has(a):focus:after{background:oklch(from var(--color) l c h/.15);box-shadow:0 0 0 .25rem oklch(from var(--color) l c h/.15)}.PWGx-pipeline-node:has(a):focus-visible:after{box-shadow:0 0 0 .2rem var(--text-color)!important}.PWGx-pipeline-node a{position:absolute;top:0;right:0;bottom:0;left:0;background:transparent}.PWGx-pipeline-node svg{width:1.75rem;height:1.75rem}.PWGx-pipeline-node:has(.PWGx-pipeline-node-terminal):before{top:4px;right:4px;bottom:4px;left:4px}.PWGx-pipeline-node-counter{width:1.25rem;border-radius:1rem;line-height:1rem;text-align:center;font-size:var(--font-size-xs);font-weight:var(--font-bold-weight);cursor:default;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));color:var(--text-color-secondary)}.PWGx-pipeline-node-counter:before{display:none!important}.PWGx-pipeline-node-terminal{width:10px;height:10px;border:2px solid color-mix(in srgb,var(--text-color-secondary),var(--background));border-radius:10px}.PWGx-pipeline-node-terminal:before{display:none!important}.PWGx-pipeline-connector-skipped{stroke:color-mix(in srgb,var(--text-color-secondary),var(--background));stroke-opacity:.25}.PWGx-pipeline-small-label{font-size:.75rem;transition:translate var(--standard-transition)}.PWGx-pipeline-small-label--selected{translate:0 2px}.PWGx-pipeline-big-label{font-weight:var(--font-bold-weight);font-size:.8125rem;transition:translate var(--standard-transition);-webkit-line-clamp:1!important}.PWGx-pipeline-big-label--selected{translate:0 -2px}.PWGx-pipeline-big-label.pgv-graph-node--synthetic{font-style:italic}.PWGx-pipeline-big-label.pgv-graph-node--skeleton{color:var(--text-color-secondary);font-weight:400}.pgv-stages__group{display:flex;flex-direction:column;gap:.5rem;margin-top:1rem}.pgv-stages__group .pgv-stages__heading{display:flex;font-size:var(--font-size-xs);color:var(--text-color-secondary);font-weight:var(--font-bold-weight);margin-bottom:.25rem;margin-top:0}.pgv-stages__group:first-of-type{margin-top:0}.PWGx-PipelineGraph-container{display:flex;flex-direction:column;align-items:center;overflow-x:auto;margin-bottom:0}.PWGx-PipelineGraph-container *{box-sizing:border-box}.PWGx-PipelineGraph-container .PWGx-PipelineGraph{margin-right:auto}.pgv-single-run{display:grid;grid-template-columns:220px 1fr;align-items:center}.pgv-single-run:last-of-type{border-bottom:none}.pgv-single-run--compact .PWGx-PipelineGraph-container{height:36px}.pgv-single-run--compact .PWGx-PipelineGraph-container>div{margin-top:-36px}.pgv-single-run .pgv-user-specified-text{display:grid;grid-template-columns:auto 1fr;align-items:start;gap:.125rem .625rem;color:var(--text-color);text-decoration:none;transition:opacity var(--standard-transition);word-break:normal;overflow-wrap:anywhere}.pgv-single-run .pgv-user-specified-text span{grid-area:2/2;color:var(--text-color-secondary);font-size:var(--font-size-xs)}.pgv-single-run .pgv-user-specified-text:hover{opacity:.75}.pgv-single-run .pgv-user-specified-text:active{opacity:.5}.pgv-single-run .pgv-user-specified-text svg{width:1.375rem;height:1.375rem}.pgv-dropdown-checkboxes{display:flex;flex-direction:column;gap:.75rem;margin:.5rem;font-size:var(--font-size-sm);color:var(--text-color);-webkit-user-select:none;user-select:none}')),document.head.appendChild(e)}}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();
import{u as x,j as e,r as p,b as f,d as u,e as P,f as b,g as j,L as S,I as E,a as D,U as C,c as _}from"./assets/PipelineGraphModel-D-hN9zFK.js";import{u as k,U as I}from"./assets/user-permission-provider-CTaL9UDG.js";import{u as F,S as L,t as R,T as B,P as U}from"./assets/PipelineGraph-DZKswEfx.js";import{D as v,a as w,S as N}from"./assets/symbols-D8rOUbjg.js";function T({run:s,currentJobPath:t}){const{run:n}=F({currentRunPath:t+s.id+"/"});function o(){if(s.changesCount===0)return;const c=p.useContext(f);return e.jsxs(e.Fragment,{children:[" - ",c.format(u.changesSummary,{0:s.changesCount})]})}const{showNames:r,showDurations:a}=x();function i(){const c={...P};return!r&&!a?c.nodeSpacingH=45:c.nodeSpacingH=90,c}function m(){return!r&&!a?"pgv-single-run--compact":""}return e.jsxs("div",{className:`pgv-single-run ${m()}`,children:[e.jsx("div",{children:e.jsxs("a",{href:t+s.id,className:"pgv-user-specified-text",children:[e.jsx(L,{status:s.result}),s.displayName,e.jsxs("span",{children:[R(s.timestamp)," - ",e.jsx(B,{ms:s.duration}),e.jsx(o,{})]})]})}),e.jsx(U,{stages:(n==null?void 0:n.stages)||[],layout:i(),collapsed:!0})]})}function O(s,t,n,o=1e4){const r=s+"multi-pipeline-graph/runs";async function a(){try{const m=await(await fetch(r)).json();t(m.data)}catch(i){n(i)}finally{setTimeout(()=>a(),o)}}a()}const V=()=>{const[s,t]=p.useState([]),[n,o]=p.useState(!1),a=document.getElementById("multiple-pipeline-root").dataset.currentJobPath;p.useEffect(()=>{n||(o(!0),O(a,t,l=>{console.log(l)}))},[s,n]);const i=b(),m=s.reduce((l,g)=>{const d=new Date(g.timestamp).toLocaleDateString(i,{year:"numeric",month:"long",day:"numeric"});return l[d]||(l[d]=[]),l[d].push(g),l},{}),c=p.useContext(f);return e.jsx(e.Fragment,{children:Object.keys(m).length===0?e.jsx("div",{className:"pgv-stages__group",children:e.jsx("div",{className:"pgv-stages__heading",children:c.format(u.noBuilds)})}):Object.entries(m).map(([l,g])=>e.jsxs("div",{className:"pgv-stages__group",children:[e.jsx("p",{className:"pgv-stages__heading",children:l}),g.map(d=>e.jsx(T,{run:d,currentJobPath:a},d.id))]},l))})};function h({label:s,value:t,setValue:n}){const o=p.useId();return e.jsxs("div",{className:"jenkins-checkbox",children:[e.jsx("input",{type:"checkbox",id:o,name:o,checked:t,onChange:r=>n(r.target.checked)}),e.jsx("label",{htmlFor:o,children:s})]})}function G({buttonPortal:s}){const{showNames:t,setShowNames:n,showDurations:o,setShowDurations:r}=x(),{canConfigure:a}=k(),i=j();return e.jsx(v,{container:s,children:e.jsx(w,{className:"jenkins-card__reveal",items:[e.jsxs("div",{className:"pgv-dropdown-checkboxes",children:[e.jsx(h,{label:i.format(u.showNames),value:t,setValue:n}),e.jsx(h,{label:i.format(u.showDuration),value:o,setValue:r})]},"settings-options"),a?"separator":e.jsx(e.Fragment,{}),a?{text:"Configure",icon:N,href:"../configure"}:e.jsx(e.Fragment,{})]})})}function M({buttonPortal:s}){if(!s)return console.warn("Could not find settings button element to generate a portal."),e.jsx(e.Fragment,{});const t=j(),{showNames:n,setShowNames:o,showDurations:r,setShowDurations:a}=x();return e.jsx(e.Fragment,{children:e.jsx(v,{container:s,children:e.jsx(w,{tooltip:t.format(u.settings),icon:N,className:"jenkins-card__reveal",items:[e.jsxs("div",{className:"pgv-dropdown-checkboxes",children:[e.jsx(h,{label:t.format(u.showNames),value:n,setValue:o}),e.jsx(h,{label:t.format(u.showDuration),value:r,setValue:a})]},"settings-options")]})})})}const H=()=>{const s=document.getElementById("multiple-pipeline-root").dataset.userLocale,t=document.getElementById("pgv-settings"),n=document.getElementById("multiple-pipeline-overflow-root");if(!t&&!n)throw new Error("Failed to find the 'settings/overflow' element");if(t&&n)throw new Error("Only one of the 'settings/overflow' elements should be defined");return e.jsx("div",{children:e.jsx(S,{locale:s,children:e.jsx(E,{bundles:[D.messages],children:e.jsxs(C,{children:[t&&e.jsx(M,{buttonPortal:t}),n&&e.jsx(I,{children:e.jsx(G,{buttonPortal:n})}),e.jsx(V,{})]})})})})},y=document.getElementById("multiple-pipeline-root");if(!y)throw new Error("Failed to find the 'multiple-pipeline-root' element");const z=_.createRoot(y);z.render(e.jsx(H,{}));
//# sourceMappingURL=multi-pipeline-graph-view-bundle.js.map
