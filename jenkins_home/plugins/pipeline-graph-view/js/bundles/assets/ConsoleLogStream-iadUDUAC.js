import{j as f,r as l,R as C}from"./PipelineGraphModel-D-hN9zFK.js";import{O as A,t as v,l as N}from"./PipelineConsole-CoyLrI4n.js";import"./stages-HPAiiKtF.js";import"./PipelineGraph-DZKswEfx.js";import"./user-preference-provider-ryPtRMxk.js";import"./symbols-D8rOUbjg.js";import"./user-permission-provider-CTaL9UDG.js";import"../pipeline-console-view-bundle.js";var S={amp:"&",gt:">",lt:"<",nbsp:"Â ",quot:'"'},I=/^#[xX]([A-Fa-f0-9]+)$/,x=/^#([0-9]+)$/,E=/^([A-Za-z0-9]+)$/,B=function(){function i(t){this.named=t}return i.prototype.parse=function(t){if(t){var n=t.match(I);if(n)return String.fromCharCode(parseInt(n[1],16));if(n=t.match(x),n)return String.fromCharCode(parseInt(n[1],10));if(n=t.match(E),n)return this.named[n[1]]||"&"+n[1]+";"}},i}(),V=/[\t\n\f ]/,w=/[A-Za-z]/,P=/\r\n?/g;function u(i){return V.test(i)}function y(i){return w.test(i)}function $(i){return i.replace(P,`
`)}var G=function(){function i(t,n,s){s===void 0&&(s="precompile"),this.delegate=t,this.entityParser=n,this.mode=s,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var e=this.peek();if(e==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&e===`
`){var o=this.tagNameBuffer.toLowerCase();(o==="pre"||o==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var e=this.peek(),o=this.tagNameBuffer;e==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):e==="&"&&o!=="script"&&o!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(e))},tagOpen:function(){var e=this.consume();e==="!"?this.transitionTo("markupDeclarationOpen"):e==="/"?this.transitionTo("endTagOpen"):(e==="@"||e===":"||y(e))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(e))},markupDeclarationOpen:function(){var e=this.consume();if(e==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var o=e.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();o==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var e=this.consume();u(e)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var e=this.consume();u(e)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(e.toLowerCase()))},doctypeName:function(){var e=this.consume();u(e)?this.transitionTo("afterDoctypeName"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(e.toLowerCase())},afterDoctypeName:function(){var e=this.consume();if(!u(e))if(e===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var o=e.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),h=o.toUpperCase()==="PUBLIC",r=o.toUpperCase()==="SYSTEM";(h||r)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),h?this.transitionTo("afterDoctypePublicKeyword"):r&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var e=this.peek();u(e)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):e==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):e==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):e===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var e=this.consume();e==='"'?this.transitionTo("afterDoctypePublicIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(e)},doctypePublicIdentifierSingleQuoted:function(){var e=this.consume();e==="'"?this.transitionTo("afterDoctypePublicIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(e)},afterDoctypePublicIdentifier:function(){var e=this.consume();u(e)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):e==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):e==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var e=this.consume();u(e)||(e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):e==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):e==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var e=this.consume();e==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(e)},doctypeSystemIdentifierSingleQuoted:function(){var e=this.consume();e==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):e===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(e)},afterDoctypeSystemIdentifier:function(){var e=this.consume();u(e)||e===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var e=this.consume();e==="-"&&this.peek()==="-"?this.transitionTo("commentStartDash"):e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(e),this.transitionTo("comment"))},commentStartDash:function(){var e=this.consume();e==="-"?this.transitionTo("commentEnd"):e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var e=this.consume();e==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(e)},commentEndDash:function(){var e=this.consume();e==="-"&&this.peek()==="-"?this.delegate.appendToCommentData(e):e==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+e),this.transitionTo("comment"))},commentEnd:function(){var e=this.consume();e===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+e),this.transitionTo("comment"))},tagName:function(){var e=this.consume();u(e)?this.transitionTo("beforeAttributeName"):e==="/"?this.transitionTo("selfClosingStartTag"):e===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(e)},endTagName:function(){var e=this.consume();u(e)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):e==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):e===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(e)},beforeAttributeName:function(){var e=this.peek();if(u(e)){this.consume();return}else e==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):e===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):e==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var e=this.peek();u(e)?(this.transitionTo("afterAttributeName"),this.consume()):e==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):e==='"'||e==="'"||e==="<"?(this.delegate.reportSyntaxError(e+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(e)):(this.consume(),this.delegate.appendToAttributeName(e))},afterAttributeName:function(){var e=this.peek();if(u(e)){this.consume();return}else e==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(e))},beforeAttributeValue:function(){var e=this.peek();u(e)?this.consume():e==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):e==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):e===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(e))},attributeValueDoubleQuoted:function(){var e=this.consume();e==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):e==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(e)},attributeValueSingleQuoted:function(){var e=this.consume();e==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):e==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(e)},attributeValueUnquoted:function(){var e=this.peek();u(e)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):e==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):e==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):e===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(e))},afterAttributeValueQuoted:function(){var e=this.peek();u(e)?(this.consume(),this.transitionTo("beforeAttributeName")):e==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):e===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var e=this.peek();e===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var e=this.consume();(e==="@"||e===":"||y(e))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(e))}},this.reset()}return i.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},i.prototype.transitionTo=function(t){this.state=t},i.prototype.tokenize=function(t){this.reset(),this.tokenizePart(t),this.tokenizeEOF()},i.prototype.tokenizePart=function(t){for(this.input+=$(t);this.index<this.input.length;){var n=this.states[this.state];if(n!==void 0)n.call(this);else throw new Error("unhandled state "+this.state)}},i.prototype.tokenizeEOF=function(){this.flushData()},i.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},i.prototype.peek=function(){return this.input.charAt(this.index)},i.prototype.consume=function(){var t=this.peek();return this.index++,t===`
`?(this.line++,this.column=0):this.column++,t},i.prototype.consumeCharRef=function(){var t=this.input.indexOf(";",this.index);if(t!==-1){var n=this.input.slice(this.index,t),s=this.entityParser.parse(n);if(s){for(var e=n.length;e;)this.consume(),e--;return this.consume(),s}}},i.prototype.markTagStart=function(){this.delegate.tagOpen()},i.prototype.appendToTagName=function(t){this.tagNameBuffer+=t,this.delegate.appendToTagName(t)},i.prototype.isIgnoredEndTag=function(){var t=this.tagNameBuffer;return t==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||t==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||t==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},i}(),L=function(){function i(t,n){n===void 0&&(n={}),this.options=n,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new G(this,t,n.mode),this._currentAttribute=void 0}return i.prototype.tokenize=function(t){return this.tokens=[],this.tokenizer.tokenize(t),this.tokens},i.prototype.tokenizePart=function(t){return this.tokens=[],this.tokenizer.tokenizePart(t),this.tokens},i.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},i.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},i.prototype.current=function(){var t=this.token;if(t===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return t;for(var n=0;n<arguments.length;n++)if(t.type===arguments[n])return t;throw new Error("token type was unexpectedly "+t.type)},i.prototype.push=function(t){this.token=t,this.tokens.push(t)},i.prototype.currentAttribute=function(){return this._currentAttribute},i.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},i.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},i.prototype.appendToDoctypeName=function(t){this.current("Doctype").name+=t},i.prototype.appendToDoctypePublicIdentifier=function(t){var n=this.current("Doctype");n.publicIdentifier===void 0?n.publicIdentifier=t:n.publicIdentifier+=t},i.prototype.appendToDoctypeSystemIdentifier=function(t){var n=this.current("Doctype");n.systemIdentifier===void 0?n.systemIdentifier=t:n.systemIdentifier+=t},i.prototype.endDoctype=function(){this.addLocInfo()},i.prototype.beginData=function(){this.push({type:"Chars",chars:""})},i.prototype.appendToData=function(t){this.current("Chars").chars+=t},i.prototype.finishData=function(){this.addLocInfo()},i.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},i.prototype.appendToCommentData=function(t){this.current("Comment").chars+=t},i.prototype.finishComment=function(){this.addLocInfo()},i.prototype.tagOpen=function(){},i.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},i.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},i.prototype.finishTag=function(){this.addLocInfo()},i.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},i.prototype.appendToTagName=function(t){this.current("StartTag","EndTag").tagName+=t},i.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},i.prototype.appendToAttributeName=function(t){this.currentAttribute()[0]+=t},i.prototype.beginAttributeValue=function(t){this.currentAttribute()[2]=t},i.prototype.appendToAttributeValue=function(t){this.currentAttribute()[1]+=t},i.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},i.prototype.reportSyntaxError=function(t){this.current().syntaxError=t},i}();function z(i,t){var n=new L(new B(S),t);return n.tokenize(i)}const T="LinkifyResult",p="StartTag",D="EndTag",g="Chars",O="Comment",R="Doctype";function F(i,t={}){const n=z(i),s=[],e=[],o=new A(t,j);for(let h=0;h<n.length;h++){const r=n[h];if(r.type===p){s.push(r);const a=r.tagName.toUpperCase();if(!(a==="A"||o.ignoreTags.indexOf(a)>=0))continue;let d=s.length;H(a,n,++h,s),h+=s.length-d-1}else if(r.type!==g)s.push(r);else{const a=Q(r.chars,o);s.push.apply(s,a)}}for(let h=0;h<s.length;h++){const r=s[h];switch(r.type){case T:e.push(r.rendered);break;case p:{let a="<"+r.tagName;r.attributes.length>0&&(a+=" "+M(r.attributes).join(" ")),r.selfClosing&&(a+=" /"),a+=">",e.push(a);break}case D:e.push(`</${r.tagName}>`);break;case g:e.push(b(r.chars));break;case O:e.push(`<!--${b(r.chars)}-->`);break;case R:{let a=`<!DOCTYPE ${r.name}`;r.publicIdentifier&&(a+=` PUBLIC "${r.publicIdentifier}"`),r.systemIdentifier&&(a+=` "${r.systemIdentifier}"`),a+=">",e.push(a);break}}}return e.join("")}function Q(i,t){const n=v(i),s=[];for(let e=0;e<n.length;e++){const o=n[e];o.t==="nl"&&t.get("nl2br")?s.push({type:p,tagName:"br",attributes:[],selfClosing:!0}):!o.isLink||!t.check(o)?s.push({type:g,chars:o.toString()}):s.push({type:T,rendered:t.render(o)})}return s}function H(i,t,n,s){let e=1;for(;n<t.length&&e>0;){let o=t[n];o.type===p&&o.tagName.toUpperCase()===i?e++:o.type===D&&o.tagName.toUpperCase()===i&&e--,s.push(o),n++}return s}function j({tagName:i,attributes:t,content:n}){return`<${i} ${U(t)}>${b(n)}</${i}>`}function b(i){return i.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function k(i){return i.replace(/"/g,"&quot;")}function U(i){const t=[];for(const n in i){const s=i[n]+"";t.push(`${n}="${k(s)}"`)}return t.join(" ")}function M(i){const t=[];for(let n=0;n<i.length;n++){const s=i[n][0],e=i[n][1]+"";t.push(`${s}="${k(e)}"`)}return t}function q(i){const t=/^\u001b\[([;0-9]*)m$/,n={isSelectGraphicRendition:!1,escapeCode:i},s=t.exec(i);if(s){n.isSelectGraphicRendition=!0,n.setFG=!1,n.setBG=!1,n.resetFG=!1,n.resetBG=!1;const e=(s[1]||"").split(";").map(o=>parseInt(o||"0"));for(const o of e)o>=30&&o<=37?n.setFG=o-30:o>=40&&o<=47?n.setBG=o-40:((o===38||o===0)&&(n.resetFG=!0,n.setFG=!1),(o===48||o===0)&&(n.resetBG=!0,n.setBG=!1))}return n}function _(i){if(typeof i!="string")return[];const t=i.length;if(t===0)return[];let n=0,s=0,e=0,o=0,h=0;const r=[];for(;n<t&&(s=i.indexOf("\x1B",n),s!==-1);){if(o=i.indexOf("<!--",n),h=i.indexOf("-->",o),h!==-1&&(h+=3),s>o&&s<h){n=h;continue}s>n&&(r.push(i.substring(n,s)),n=s),s+=2;let a=i.charCodeAt(s);for(;s<t&&(a<64||a>126);)s++,a=i.charCodeAt(s);const c=q(i.substring(n,s+1));r.push(c),n=s+1,e=n}return e<t&&r.push(i.substr(e)),r}function Y(i,t){const n=[];let s={setFG:!1,setBG:!1};for(let e=0;e<i.length;e++){const o=i[e];if(typeof o=="string")if(!s.setFG&&!s.setBG)n.push(f.jsx("div",{dangerouslySetInnerHTML:{__html:o}},`${t}-${e}`));else{const h=[];typeof s.setFG=="number"&&h.push(`ansi-fg-${s.setFG}`),typeof s.setBG=="number"&&h.push(`ansi-bg-${s.setBG}`),n.push(f.jsx("span",{className:h.join(" "),children:o}))}else if(o.isSelectGraphicRendition){const h={...s};o.resetFG&&(h.setFG=!1),o.resetBG&&(h.setBG=!1),typeof o.setFG=="number"&&(h.setFG=o.setFG),typeof o.setBG=="number"&&(h.setBG=o.setBG),s=h}}return n}const K=l.memo(function(t){const n=l.useRef(null);return l.useEffect(()=>{const s=n.current?n.current.getBoundingClientRect().height:0;t.heightCallback(s)},[]),f.jsx("pre",{style:{background:"none",border:"none"},className:"console-output-line",children:f.jsxs("div",{className:"console-output-line",ref:n,children:[f.jsx("a",{className:"console-line-number",id:`log-${t.lineNumber}`,href:`?start-byte=${t.startByte}&selected-node=${t.stepId}#log-${t.lineNumber}`,style:{width:Math.max(9*String(t.lineNumber).length,30)+"px"},children:t.lineNumber}),f.jsx("div",{id:`${t.stepId}-${t.lineNumber}`,className:"console-text",children:Y(_(F(t.content,N)),`${t.stepId}-${t.lineNumber}`)})]},`${t.lineNumber}-body`)},`console-line-pre${t.lineNumber}`)});function se(i){const t=l.useRef(null),[n,s]=l.useState(!1),[e,o]=l.useState(1);l.useEffect(()=>()=>{t.current&&clearInterval(t.current)},[]),l.useEffect(()=>{n&&i.logBuffer.lines.length>0&&i.logBuffer.lines&&requestAnimationFrame(()=>{const a=document.documentElement.scrollHeight;window.scrollTo({top:a})})},[i.logBuffer.lines]),l.useEffect(()=>{const a=()=>{const c=window.scrollY+window.innerHeight,m=document.body.scrollHeight-c<300;s(m)};return window.addEventListener("scroll",a),()=>window.removeEventListener("scroll",a)},[]),l.useEffect(()=>{n&&r()?t.current||(t.current=setInterval(()=>{i.onMoreConsoleClick(i.step.id,i.logBuffer.startByte)},1e3)):t.current&&(clearInterval(t.current),t.current=null)},[n,i.step,i.logBuffer]);const h=l.useCallback(a=>{(a>e||e===1)&&o(a)},[e]),r=()=>i.step.state===C.running||i.logBuffer.startByte<0;return l.useEffect(()=>{const a=window.location.hash;if(!a.startsWith("#log-"))return;const c=parseInt(a.substring(5));if(!isNaN(c)){const d=document.getElementById(`log-${c}`);if(d){d.scrollIntoView({behavior:"smooth",block:"center"});const m=location.hash;location.hash="",location.hash=m}}},[]),f.jsx("div",{role:"log",children:i.logBuffer.lines.map((a,c)=>f.jsx(K,{lineNumber:String(c),content:a,stepId:i.step.id,startByte:i.logBuffer.startByte,heightCallback:h},c))})}export{se as default};
//# sourceMappingURL=ConsoleLogStream-iadUDUAC.js.map
